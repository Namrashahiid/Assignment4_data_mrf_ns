---
title: "Assignment4"
format: html
editor: visual
author: Marit Rygg Fredheim & Namra Shahid
---

## Assignment 4

```{r}
library(dplyr)
library(tidyverse)
library(PxWebApiData)
```

```{r}
load(file = "data/pm2.Rdata")
```

```{r}
aar <- as.factor(2008:2017)
```

```{r}
pm2 %>%
mutate(
  .before = pm2
)
```

```{r}
factor(aar) 
```

```{r}
knr <- pm2 %>%
  select(knr) %>%
  distinct(knr) %>%
  pull()
```

```{r}
pm2 %>% 
  select(knr) %>%
  distinct(knr) %>%
  pull()


```

```{r}
typeof(knr)
```

```{r}
pm2 <- pm2 %>% 
  mutate(tid = aar) 
```

```{r}
pm2
```

### Sysselsatte

```{r}
ApiData(
  "https://data.ssb.no/api/v0/no/table/13122/",
  returnMetaFrames = TRUE
)
```

```{r}
Tid <- as.character(2008:2017)
```

```{r}
sysselsatte <- ApiData(
  urlToData = "13122",
  Region = knr
    )

names(sysselsatte)[1] <- "desc"
names(sysselsatte)[2] <- "ss"
```

```{r}
# ...
ss <- sysselsatte$ss %>% 
  # ...
  mutate(
    knavn = sysselsatte$desc$region,
  ) %>% 
  # Endrer variabelnavn
  rename(
    aar = Tid,
    knr = Region,
    ss = value 
  )  %>%
  select(aar, knavn, knr, ss) %>% 
  as_tibble()
```

```{r}
ss %>%
head(n = 5) %>%
print()
```
